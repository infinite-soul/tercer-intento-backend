<!-- cart.handlebars -->
<h1>Carrito de compras</h1>

<ul>
  {{#each cart.products}}
    <li>
      <h3>{{product.title}}</h3>
      <p>Precio: ${{product.price}}</p>
      <p>Cantidad: {{quantity}}</p>
      <button data-product-id="{{product._id}}" data-cart-id="{{../cart._id}}">Eliminar del carrito</button>
      <form>
        <input type="number" value="{{quantity}}" min="1" data-product-id="{{product._id}}" data-cart-id="{{../cart._id}}">
        <button type="submit">Actualizar cantidad</button>
      </form>
    </li>
  {{/each}}
</ul>

<script>
  const deleteButtons = document.querySelectorAll('button[data-product-id]');
  deleteButtons.forEach(button => {
    button.addEventListener('click', () => {
      const productId = button.dataset.productId;
      const cartId = button.dataset.cartId;
      // Enviar una solicitud a la ruta /api/carts/:cid/products/:pid para eliminar el producto del carrito
    });
  });

  const quantityForms = document.querySelectorAll('form');
  quantityForms.forEach(form => {
    form.addEventListener('submit', (event) => {
      event.preventDefault();
      const input = event.target.querySelector('input');
      const productId = input.dataset.productId;
      const cartId = input.dataset.cartId;
      const quantity = input.value;
      // Enviar una solicitud a la ruta /api/carts/:cid/products/:pid para actualizar la cantidad del producto en el carrito
    });
  });
</script>